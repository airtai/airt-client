
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Python client for airt-service">
      
      
        <meta name="author" content="airt.ai">
      
      
        <link rel="canonical" href="https://airtai.github.io/airt-client/API_User/">
      
      
      
      <link rel="icon" href="../overrides/images/airt_icon_blue.svg">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.18">
    
    
      
        <title>API_User - airt</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../overrides/css/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-H6EV08GRK5"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-H6EV08GRK5",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-H6EV08GRK5",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  
  
    
  
  
  <meta property="og:type" content="website" />
  <meta property="og:title" content="airt - API_User" />
  <meta property="og:description" content="Python client for airt-service" />
  <meta property="og:url" content="https://airtai.github.io/airt-client/API_User/" />
  <meta property="og:image" content="https://opengraph.githubassets.com/1671820337.584456/airtai/airt-client" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="airt - API_User" />
  <meta name="twitter:description" content="Python client for airt-service" />
  <meta name="twitter:image" content="https://opengraph.githubassets.com/1671820337.584456/airtai/airt-client" />

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="light-blue">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api_user" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="airt" class="md-header__button md-logo" aria-label="airt" data-md-component="logo">
      
  <img src="../overrides/images/airt_icon_blue.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            airt
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API_User
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/airtai/airt-client" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    airt-client
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="airt" class="md-nav__button md-logo" aria-label="airt" data-md-component="logo">
      
  <img src="../overrides/images/airt_icon_blue.svg" alt="logo">

    </a>
    airt
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/airtai/airt-client" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    airt-client
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Python client for airt service
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Tutorial/" class="md-nav__link">
        Tutorial
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../airt_api_docs/airt/client/" class="md-nav__link">
        airt.client
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          CLI
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          CLI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../airt_cli_docs/airt/" class="md-nav__link">
        airt
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../CHANGELOG/" class="md-nav__link">
        Releases
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#user" class="md-nav__link">
    User
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="api_user">API_User<a class="headerlink" href="#api_user" title="Permanent link">¤</a></h1>
<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

<p>Note:</p>
<p>While writing doc strings, please use the below syntax for linking
methods/classes. So that the methods/classes gets highlighted in the
browser and clicking on it will take the user to the linked function</p>
<div class="highlight"><pre><span></span><code>- To link a method from the class same file please use the `method_name` format.
- To link a method from a different Class (can in a seperate file also) please use `Classname.method_name` format.
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">airt._testing</span> <span class="kn">import</span> <span class="n">activate_by_import</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>[INFO] airt.testing.activate_by_import: Testing environment activated.
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">contextmanager</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randrange</span>

<span class="kn">import</span> <span class="nn">pytest</span>

<span class="kn">import</span> <span class="nn">airt._sanitizer</span>
<span class="kn">from</span> <span class="nn">airt._constant</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">SERVICE_PASSWORD</span><span class="p">,</span>
    <span class="n">SERVICE_SUPER_USER</span><span class="p">,</span>
    <span class="n">SERVICE_TOKEN</span><span class="p">,</span>
    <span class="n">SERVICE_USERNAME</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">airt._docstring.helpers</span> <span class="kn">import</span> <span class="n">run_examples_from_docstring</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">display</span><span class="p">(</span><span class="n">logger</span><span class="o">.</span><span class="n">getEffectiveLevel</span><span class="p">())</span>
<span class="k">assert</span> <span class="n">logger</span><span class="o">.</span><span class="n">getEffectiveLevel</span><span class="p">()</span> <span class="o">==</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span>

<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;This is a debug message&quot;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;This is an info&quot;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;This is a warning&quot;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;This is an error&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>20

[INFO] __main__: This is an info
[WARNING] __main__: This is a warning
[ERROR] __main__: This is an error
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">INVALID_UUID_FOR_TESTING</span> <span class="o">=</span> <span class="s2">&quot;00000000-0000-0000-0000-000000000000&quot;</span>
</code></pre></div>
<hr />
<p><a
href="https://github.com/airtai/airt-client/blob/main/airt/_components/user.py#L33"
target="_blank" style="float:right; font-size:smaller">source</a></p>
<h3 id="user">User<a class="headerlink" href="#user" title="Permanent link">¤</a></h3>
<blockquote>
<div class="highlight"><pre><span></span><code> User (uuid:str, username:Optional[str]=None,
       first_name:Optional[str]=None, last_name:Optional[str]=None,
       email:Optional[str]=None, subscription_type:Optional[str]=None,
       super_user:Optional[bool]=None, disabled:Optional[str]=None,
       created:Optional[str]=None, is_mfa_active:Optional[bool]=None,
       phone_number:Optional[str]=None,
       is_phone_number_verified:Optional[bool]=None)
</code></pre></div>
</blockquote>
<p>A class for creating, managing, and updating users on the server.</p>
<p>The <strong>User</strong> class has two types of methods:</p>
<ul>
<li>Methods for creating and managing users.</li>
<li>Method for updating and adding additional security to user accounts.</li>
</ul>
<p>Methods such as
<a href="https://airtai.github.io/airt-client/cli_user.html#create"><code>create</code></a>,
<a href="https://airtai.github.io/airt-client/cli_user.html#enable"><code>enable</code></a>,
<a href="https://airtai.github.io/airt-client/cli_user.html#disable"><code>disable</code></a>,
and <a href="https://airtai.github.io/airt-client/cli_user.html#ls"><code>ls</code></a> can be
used to manage user accounts on the server, but access to them requires
super user privileges.</p>
<p>The remaining methods do not require super user privileges and are used
to update/additionally secure user accounts.</p>
<p>In addition to the regular authentication with credentials, the users
can enable multi-factor authentication (MFA) and single sign-on (SSO)
for their accounts.</p>
<p>To help protect your account, we recommend that you enable multi-factor
authentication (MFA). MFA provides additional security by requiring you
to provide unique verification code (OTP) in addition to your regular
sign-in credentials when performing critical operations.</p>
<p>Your account can be configured for MFA in just two easy steps:</p>
<ul>
<li>
<p>To begin, you need to enable MFA for your account by calling the
  <code>enable_mfa</code> method, which will generate a QR code. You can then scan
  the QR code with an authenticator app, such as Google Authenticator
  and follow the on-device instructions to finish the setup in your
  smartphone.</p>
</li>
<li>
<p>Finally, activate MFA for your account by calling <code>activate_mfa</code> and
  passing the dynamically generated six-digit verification code from
  your smartphone’s authenticator app.</p>
</li>
</ul>
<p>Single sign-on (SSO) can be enabled for your account in three simple
steps:</p>
<ul>
<li>
<p>Enable the SSO for a provider by calling the <code>enable_sso</code> method with
  the SSO provider name and an email address. At the moment, we only
  support “google” and “github” as SSO providers. We intend to support
  additional SSO providers in future releases.</p>
</li>
<li>
<p>Before you can start generating new tokens with SSO, you must first
  authenticate with the SSO provider. Call the get_token with the same
  SSO provider you have enabled in the step above to generate an SSO
  authorization URL. Please copy and paste it into your preferred
  browser and complete the authentication process with the SSO provider.</p>
</li>
<li>
<p>After successfully authenticating with the SSO provider, call the
  <a href="https://airtai.github.io/airt-client/api_client.html#client.set_sso_token"><code>Client.set_sso_token</code></a>
  method to generate a new token and use it automatically in all future
  interactions with the airt server.</p>
</li>
</ul>
<p>Here’s an example of using the User class’s methods to display the
logged-in user’s uuid</p>
<p>Example: ```python # Importing necessary libraries from airt.client
import User, Client</p>
<div class="highlight"><pre><span></span><code># Authenticate
Client.get_token(username=&quot;{fill in username}&quot;, password=&quot;{fill in password}&quot;)

# Display the uuid of logged-in user
user_details = User.details()
print(user_details[&quot;uuid&quot;])
```
</code></pre></div>
<p>``` python</p>
<h1 id="run-example-for-user">Run example for User<a class="headerlink" href="#run-example-for-user" title="Permanent link">¤</a></h1>
<p>run_examples_from_docstring(
    User,
    username=os.environ[SERVICE_USERNAME],
    password=os.environ[SERVICE_PASSWORD],
)
<div class="highlight"><pre><span></span><code>&lt;pre style=&quot;white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,&#39;DejaVu Sans Mono&#39;,consolas,&#39;Courier New&#39;,monospace&quot;&gt;╭─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Example:                                                                                                        │
│                                                                                                                 │
│     # Importing necessary libraries                                                                             │
│     from  airt.client import User, Client                                                                       │
│                                                                                                                 │
│     # Authenticate                                                                                              │
│     Client.get_token(username=&quot;{fill in username}&quot;, password=&quot;{fill in password}&quot;)                              │
│                                                                                                                 │
│     # Display the uuid of logged-in user                                                                        │
│     user_details = User.details()                                                                               │
│     print(user_details[&quot;uuid&quot;])                                                                                 │
│                                                                                                                 │
│ ╭────────────────────────────────────────────────── stdout ───────────────────────────────────────────────────╮ │
│ │ 7363f72b-7ebb-425c-832f-99c42fb7a016                                                                        │ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭────────────────────────────────────────────────── stderr ───────────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
&lt;/pre&gt;

``` python
# Run example for User.create

username = os.environ[SERVICE_SUPER_USER]
password = os.environ[SERVICE_PASSWORD]
username_for_new_test_user = f&quot;random_user_{randrange(10000)}_{randrange(10000)}&quot;
password_for_new_test_user = &quot;example_password&quot;

run_examples_from_docstring(
    User.create,
    super_user_username=username,
    super_user_password=password,
    username=username_for_new_test_user,
    first_name=&quot;example_first_name&quot;,
    last_name=&quot;example_last_name&quot;,
    email=f&quot;random_user_{randrange(10000)}_{randrange(10000)}@email.com&quot;,
    password=password_for_new_test_user,
    super_user=&quot;False&quot;,
    subscription_type=&quot;test&quot;,
)
</code></pre></div></p>
<div class="highlight"><pre><span></span><code>&lt;module&gt;:5: No type or annotation for parameter &#39;username&#39;
&lt;module&gt;:6: No type or annotation for parameter &#39;first_name&#39;
&lt;module&gt;:7: No type or annotation for parameter &#39;last_name&#39;
&lt;module&gt;:8: No type or annotation for parameter &#39;email&#39;
&lt;module&gt;:9: No type or annotation for parameter &#39;password&#39;
&lt;module&gt;:10: No type or annotation for parameter &#39;subscription_type&#39;
&lt;module&gt;:12: No type or annotation for parameter &#39;super_user&#39;
&lt;module&gt;:14: No type or annotation for parameter &#39;phone_number&#39;
&lt;module&gt;:17: No type or annotation for parameter &#39;otp&#39;
&lt;module&gt;:21: No type or annotation for returned value 1
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
</code></pre></div>
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">╭─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Example:                                                                                                        │
│                                                                                                                 │
│                                                                                                                 │
│     # Importing necessary libraries                                                                             │
│     from  airt.client import Client, User                                                                       │
│                                                                                                                 │
│     # Authenticate with super user privileges                                                                   │
│     Client.get_token(                                                                                           │
│         username="{fill in super_user_username}",                                                               │
│         password="{fill in super_user_password}"                                                                │
│     )                                                                                                           │
│                                                                                                                 │
│     # Details required to create a new user                                                                     │
│     username = "{fill in username}"                                                                             │
│     first_name = "{fill in first_name}"                                                                         │
│     last_name = "{fill in last_name}"                                                                           │
│     email = "{fill in email}"                                                                                   │
│     password = "{fill in password}"                                                                             │
│     super_user = "{fill in super_user}"                                                                         │
│     subscription_type = "{fill in subscription_type}"                                                           │
│                                                                                                                 │
│     # Create a new user. To access this method, you must have super user privileges.                            │
│     new_user = User.create(                                                                                     │
│         username=username,                                                                                      │
│         first_name=first_name,                                                                                  │
│         last_name=last_name,                                                                                    │
│         email=email,                                                                                            │
│         password=password,                                                                                      │
│         super_user=super_user,                                                                                  │
│         subscription_type=subscription_type,                                                                    │
│     )                                                                                                           │
│                                                                                                                 │
│     # Display the details of the newly created user                                                             │
│     print(new_user)                                                                                             │
│                                                                                                                 │
│     # An exception will be raised if you attempt to create a new user                                           │
│     # with an already-used username or email address.                                                           │
│     try:                                                                                                        │
│         User.create(                                                                                            │
│             username=username,                                                                                  │
│             first_name=first_name,                                                                              │
│             last_name=last_name,                                                                                │
│             email=email,                                                                                        │
│             password=password,                                                                                  │
│             super_user=super_user,                                                                              │
│             subscription_type=subscription_type,                                                                │
│         )                                                                                                       │
│         print("Should not print this, the above line should raise an exception")                                │
│         raise RuntimeException()                                                                                │
│                                                                                                                 │
│     except ValueError as e:                                                                                     │
│         print("Expected to fail, everything is fine")                                                           │
│                                                                                                                 │
│ ╭────────────────────────────────────────────────── stdout ───────────────────────────────────────────────────╮ │
│ │                                    uuid  ... is_phone_number_verified                                       │ │
│ │ 0  bf2dc2ee-960f-4fff-bcca-ba4402fd67bf  ...                    False                                       │ │
│ │                                                                                                             │ │
│ │ [1 rows x 12 columns]                                                                                       │ │
│ │ Expected to fail, everything is fine                                                                        │ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭────────────────────────────────────────────────── stderr ───────────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</pre>

<div class="highlight"><pre><span></span><code><span class="c1"># Run example for User.reset_password</span>
<span class="c1"># The below example is expected to throw an exception because</span>
<span class="c1"># the phone number is not registered for the test user.</span>
<span class="c1"># This is to avoid sending SMS each time we run the tests</span>
<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">run_examples_from_docstring</span><span class="p">(</span>
        <span class="n">User</span><span class="o">.</span><span class="n">reset_password</span><span class="p">,</span>
        <span class="n">username</span><span class="o">=</span><span class="n">username_for_new_test_user</span><span class="p">,</span>
        <span class="n">new_password</span><span class="o">=</span><span class="n">password_for_new_test_user</span><span class="p">,</span>
        <span class="n">otp</span><span class="o">=</span><span class="s2">&quot;123456&quot;</span><span class="p">,</span>
        <span class="n">supress_stderr</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;module&gt;:17: No type or annotation for parameter &#39;username&#39;
&lt;module&gt;:18: No type or annotation for parameter &#39;new_password&#39;
&lt;module&gt;:19: No type or annotation for parameter &#39;otp&#39;
&lt;module&gt;:23: No type or annotation for returned value 1
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
</code></pre></div>
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">╭─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Example:                                                                                                        │
│                                                                                                                 │
│     # Importing necessary libraries                                                                             │
│     from  airt.client import Client, User                                                                       │
│                                                                                                                 │
│     # Details required to reset the password                                                                    │
│     username = "{fill in username}"                                                                             │
│     new_password = "{fill in new_password}"                                                                     │
│     otp = "{fill in otp}" # OTP generated by the authenticator app                                              │
│                                                                                                                 │
│     # Reset the password                                                                                        │
│     User.reset_password(username=username, new_password=new_password, otp=otp)                                  │
│                                                                                                                 │
│     # Authenticate using the new credentials                                                                    │
│     Client.get_token(username=username, password=new_password, otp=otp)                                         │
│                                                                                                                 │
│     # Check if get_token is successful                                                                          │
│     print(User.details())                                                                                       │
│                                                                                                                 │
│ ╭────────────────────────────────────────────────── stdout ───────────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭───────────────────────────────────────────── stderr supressed ──────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</pre>

<div class="highlight"><pre><span></span><code><span class="c1"># Run example for User.send_sms_otp</span>

<span class="c1"># The below example is expected to throw an exception because</span>
<span class="c1"># the phone number is not registered for the test user</span>
<span class="c1"># This is to avoid sending SMS each time we run the tests</span>


<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">run_examples_from_docstring</span><span class="p">(</span>
        <span class="n">User</span><span class="o">.</span><span class="n">send_sms_otp</span><span class="p">,</span>
        <span class="n">username</span><span class="o">=</span><span class="n">username_for_new_test_user</span><span class="p">,</span>
        <span class="n">new_password</span><span class="o">=</span><span class="n">username_for_new_test_user</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="n">username_for_new_test_user</span><span class="p">,</span>
        <span class="n">otp</span><span class="o">=</span><span class="s2">&quot;123456&quot;</span><span class="p">,</span>
        <span class="n">supress_stderr</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;module&gt;:13: No type or annotation for parameter &#39;username&#39;
&lt;module&gt;:14: No type or annotation for parameter &#39;message_template_name&#39;
&lt;module&gt;:18: No type or annotation for returned value 1
</code></pre></div>
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">╭─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Example:                                                                                                        │
│                                                                                                                 │
│     # Importing necessary libraries                                                                             │
│     from  airt.client import Client, User                                                                       │
│                                                                                                                 │
│     # Request OTP via SMS to the registered phone number                                                        │
│     # Please do not change the message_template_name                                                            │
│     username="{fill in username}"                                                                               │
│     User.send_sms_otp(username=username, message_template_name="reset_password")                                │
│                                                                                                                 │
│     # The above method will send the OTP via SMS to the registered phone number,                                │
│     # which you must fill below along with your new password                                                    │
│     new_password = "{fill in new_password}"                                                                     │
│     otp = "{fill in otp}" # OTP received via SMS                                                                │
│                                                                                                                 │
│     # Reset the password                                                                                        │
│     User.reset_password(username=username, new_password=new_password, otp=otp)                                  │
│                                                                                                                 │
│     # Authenticate using the new credentials                                                                    │
│     # MFA users must pass the otp generated by the authenticator app below                                      │
│     Client.get_token(username=username, password=new_password)                                                  │
│                                                                                                                 │
│     # Check if get_token is successful                                                                          │
│     print(User.details())                                                                                       │
│                                                                                                                 │
│ ╭────────────────────────────────────────────────── stdout ───────────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭───────────────────────────────────────────── stderr supressed ──────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</pre>

<div class="highlight"><pre><span></span><code><span class="c1"># Run example for User.disable_mfa</span>
<span class="c1"># The below example is expected to throw an exception because</span>
<span class="c1"># the default user is a NON-MFA activated user and when a NON-MFA user passes otp</span>
<span class="c1"># to get the token they will get this error</span>
<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">run_examples_from_docstring</span><span class="p">(</span>
        <span class="n">User</span><span class="o">.</span><span class="n">disable_mfa</span><span class="p">,</span>
        <span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span>
        <span class="n">otp</span><span class="o">=</span><span class="s2">&quot;123456&quot;</span><span class="p">,</span>
        <span class="n">supress_stderr</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;module&gt;:20: No type or annotation for parameter &#39;user&#39;
&lt;module&gt;:22: No type or annotation for parameter &#39;otp&#39;
&lt;module&gt;:26: No type or annotation for returned value 1
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
</code></pre></div>
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">╭─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Example:                                                                                                        │
│                                                                                                                 │
│     # Importing necessary libraries                                                                             │
│     from  airt.client import Client, User                                                                       │
│                                                                                                                 │
│     # Optional Step: Skip this step if you've already logged-in                                                 │
│     # Authenticate. Pass the current OTP from the authenticator app below                                       │
│     otp="{fill in otp}"                                                                                         │
│     Client.get_token(                                                                                           │
│         username="{fill in username}",                                                                          │
│         password="{fill in password}",                                                                          │
│         otp=otp                                                                                                 │
│     )                                                                                                           │
│                                                                                                                 │
│     # Check the current MFA status                                                                              │
│     print(User.details()["is_mfa_active"])                                                                      │
│                                                                                                                 │
│     # Disable MFA for the user                                                                                  │
│     User.disable_mfa(otp=otp)                                                                                   │
│                                                                                                                 │
│     # Check the current MFA status                                                                              │
│     # The is_mfa_active flag should be set to False, if the disable was successful                              │
│     print(User.details()["is_mfa_active"])                                                                      │
│                                                                                                                 │
│ ╭────────────────────────────────────────────────── stdout ───────────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭───────────────────────────────────────────── stderr supressed ──────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</pre>

<div class="highlight"><pre><span></span><code><span class="c1"># Run example for User.ls</span>

<span class="n">username</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">SERVICE_SUPER_USER</span><span class="p">]</span>
<span class="n">password</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">SERVICE_PASSWORD</span><span class="p">]</span>

<span class="n">run_examples_from_docstring</span><span class="p">(</span>
    <span class="n">User</span><span class="o">.</span><span class="n">ls</span><span class="p">,</span>
    <span class="n">super_user_username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span>
    <span class="n">super_user_password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;module&gt;:5: No type or annotation for parameter &#39;offset&#39;
&lt;module&gt;:6: No type or annotation for parameter &#39;limit&#39;
&lt;module&gt;:7: No type or annotation for parameter &#39;disabled&#39;
&lt;module&gt;:11: No type or annotation for returned value 1
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
</code></pre></div>
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">╭─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Example:                                                                                                        │
│                                                                                                                 │
│     # Importing necessary libraries                                                                             │
│     from  airt.client import Client, User                                                                       │
│                                                                                                                 │
│     # Authenticate with super user privileges                                                                   │
│     Client.get_token(                                                                                           │
│         username="{fill in super_user_username}",                                                               │
│         password="{fill in super_user_password}"                                                                │
│     )                                                                                                           │
│                                                                                                                 │
│     # Display the details of all active users                                                                   │
│     # Set the disabled parameter to True to display the details of inactive users                               │
│     ux = User.ls()                                                                                              │
│     print(User.as_df(ux))                                                                                       │
│                                                                                                                 │
│ ╭────────────────────────────────────────────────── stdout ───────────────────────────────────────────────────╮ │
│ │                                     uuid  ... is_phone_number_verified                                      │ │
│ │ 0   7363f72b-7ebb-425c-832f-99c42fb7a016  ...                    False                                      │ │
│ │ 1   50f41000-10e1-42a4-96ca-8d693d4b9fa1  ...                    False                                      │ │
│ │ 2   d882d2de-0a72-47df-9293-3a9f3563afea  ...                    False                                      │ │
│ │ 3   b418ccca-6e15-494d-bd82-4ba86d4b90f8  ...                    False                                      │ │
│ │ 4   c1c80aa6-d29c-43c1-8cd5-ac122ef20041  ...                    False                                      │ │
│ │ 5   2ec752ef-1cd1-4659-9272-7b6bab5083cb  ...                    False                                      │ │
│ │ 6   82435b53-fe09-4804-8c41-68850ecfb112  ...                    False                                      │ │
│ │ 7   ef0e86a2-2641-4c40-b0f5-2ae1af4634fe  ...                    False                                      │ │
│ │ 8   6a4cd131-9804-4d5a-8477-3a7124f353a6  ...                    False                                      │ │
│ │ 9   f577a97f-1107-43b3-bbd5-0bd4c73cf1c0  ...                    False                                      │ │
│ │ 10  dab20424-304f-4bcc-9e36-45b40364ae48  ...                    False                                      │ │
│ │ 11  449bee19-9078-4414-b0a8-141784aaee72  ...                    False                                      │ │
│ │ 12  e8229346-51b9-4a7b-aaaf-55946b470e0e  ...                    False                                      │ │
│ │ 13  6dc3e46b-d6da-41e0-a239-fbbc2e93fc30  ...                    False                                      │ │
│ │ 14  bf2dc2ee-960f-4fff-bcca-ba4402fd67bf  ...                    False                                      │ │
│ │                                                                                                             │ │
│ │ [15 rows x 12 columns]                                                                                      │ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭────────────────────────────────────────────────── stderr ───────────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</pre>

<div class="highlight"><pre><span></span><code><span class="c1"># Run example for User.as_df</span>

<span class="n">username</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">SERVICE_SUPER_USER</span><span class="p">]</span>
<span class="n">password</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">SERVICE_PASSWORD</span><span class="p">]</span>

<span class="n">run_examples_from_docstring</span><span class="p">(</span>
    <span class="n">User</span><span class="o">.</span><span class="n">as_df</span><span class="p">,</span>
    <span class="n">super_user_username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span>
    <span class="n">super_user_password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;module&gt;:3: No type or annotation for parameter &#39;ux&#39;
&lt;module&gt;:6: No type or annotation for returned value 1
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
</code></pre></div>
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">╭─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Example:                                                                                                        │
│                                                                                                                 │
│     # Importing necessary libraries                                                                             │
│     from  airt.client import Client, User                                                                       │
│                                                                                                                 │
│     # Authenticate with super user privileges                                                                   │
│     # Only super users can get the list of available users                                                      │
│     Client.get_token(                                                                                           │
│         username="{fill in super_user_username}",                                                               │
│         password="{fill in super_user_password}"                                                                │
│     )                                                                                                           │
│                                                                                                                 │
│     # Display the details of all active users                                                                   │
│     # Set the disabled parameter to True to display the details of inactive users                               │
│     ux = User.ls()                                                                                              │
│     print(User.as_df(ux))                                                                                       │
│                                                                                                                 │
│ ╭────────────────────────────────────────────────── stdout ───────────────────────────────────────────────────╮ │
│ │                                     uuid  ... is_phone_number_verified                                      │ │
│ │ 0   7363f72b-7ebb-425c-832f-99c42fb7a016  ...                    False                                      │ │
│ │ 1   50f41000-10e1-42a4-96ca-8d693d4b9fa1  ...                    False                                      │ │
│ │ 2   d882d2de-0a72-47df-9293-3a9f3563afea  ...                    False                                      │ │
│ │ 3   b418ccca-6e15-494d-bd82-4ba86d4b90f8  ...                    False                                      │ │
│ │ 4   c1c80aa6-d29c-43c1-8cd5-ac122ef20041  ...                    False                                      │ │
│ │ 5   2ec752ef-1cd1-4659-9272-7b6bab5083cb  ...                    False                                      │ │
│ │ 6   82435b53-fe09-4804-8c41-68850ecfb112  ...                    False                                      │ │
│ │ 7   ef0e86a2-2641-4c40-b0f5-2ae1af4634fe  ...                    False                                      │ │
│ │ 8   6a4cd131-9804-4d5a-8477-3a7124f353a6  ...                    False                                      │ │
│ │ 9   f577a97f-1107-43b3-bbd5-0bd4c73cf1c0  ...                    False                                      │ │
│ │ 10  dab20424-304f-4bcc-9e36-45b40364ae48  ...                    False                                      │ │
│ │ 11  449bee19-9078-4414-b0a8-141784aaee72  ...                    False                                      │ │
│ │ 12  e8229346-51b9-4a7b-aaaf-55946b470e0e  ...                    False                                      │ │
│ │ 13  6dc3e46b-d6da-41e0-a239-fbbc2e93fc30  ...                    False                                      │ │
│ │ 14  bf2dc2ee-960f-4fff-bcca-ba4402fd67bf  ...                    False                                      │ │
│ │                                                                                                             │ │
│ │ [15 rows x 12 columns]                                                                                      │ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭────────────────────────────────────────────────── stderr ───────────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</pre>

<div class="highlight"><pre><span></span><code><span class="c1"># Run example for User.enable_mfa</span>
<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">run_examples_from_docstring</span><span class="p">(</span>
        <span class="n">User</span><span class="o">.</span><span class="n">enable_mfa</span><span class="p">,</span>
        <span class="n">username</span><span class="o">=</span><span class="n">username_for_new_test_user</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="n">password_for_new_test_user</span><span class="p">,</span>
        <span class="n">otp</span><span class="o">=</span><span class="s2">&quot;000000&quot;</span><span class="p">,</span>
        <span class="n">supress_stderr</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;module&gt;:8: No type or annotation for parameter &#39;otp&#39;
&lt;module&gt;:12: No type or annotation for returned value 1
</code></pre></div>
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">╭─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Example:                                                                                                        │
│                                                                                                                 │
│     # Importing necessary libraries                                                                             │
│     from  airt.client import User, Client                                                                       │
│                                                                                                                 │
│     # Authenticate                                                                                              │
│     Client.get_token(username="{fill in username}", password="{fill in password}")                              │
│                                                                                                                 │
│     # Check the current MFA status                                                                              │
│     print(User.details()["is_mfa_active"])                                                                      │
│                                                                                                                 │
│     # Enable MFA for the user                                                                                   │
│     # The line below will generate a QR code. To finish the setup on your smartphone,                           │
│     # scan the QR code with an authenticator app like Google Authenticator and                                  │
│     # follow the on-device instructions                                                                         │
│     User.enable_mfa()                                                                                           │
│                                                                                                                 │
│     # After you've completed the setup, enter the current OTP from the authenticator                            │
│     # app to verify and enable MFA for your account                                                             │
│     User.activate_mfa(otp="{fill in otp}")                                                                      │
│                                                                                                                 │
│     # Check the current MFA status                                                                              │
│     # The is_mfa_active flag should be set to True, if the setup is successful                                  │
│     print(User.details()["is_mfa_active"])                                                                      │
│                                                                                                                 │
│ ╭────────────────────────────────────────────────── stdout ───────────────────────────────────────────────────╮ │
│ │ False                                                                                                       │ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭───────────────────────────────────────────── stderr supressed ──────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</pre>

<div class="highlight"><pre><span></span><code><span class="c1"># Run example for User.activate_mfa</span>
<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">run_examples_from_docstring</span><span class="p">(</span>
        <span class="n">User</span><span class="o">.</span><span class="n">activate_mfa</span><span class="p">,</span>
        <span class="n">username</span><span class="o">=</span><span class="n">username_for_new_test_user</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="n">password_for_new_test_user</span><span class="p">,</span>
        <span class="n">otp</span><span class="o">=</span><span class="s2">&quot;000000&quot;</span><span class="p">,</span>
        <span class="n">supress_stderr</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;module&gt;:7: No type or annotation for parameter &#39;otp&#39;
&lt;module&gt;:10: No type or annotation for returned value 1
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
</code></pre></div>
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">╭─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Example:                                                                                                        │
│                                                                                                                 │
│     # Importing necessary libraries                                                                             │
│     from  airt.client import User, Client                                                                       │
│                                                                                                                 │
│     # Authenticate                                                                                              │
│     Client.get_token(username="{fill in username}", password="{fill in password}")                              │
│                                                                                                                 │
│     # Check the current MFA status                                                                              │
│     print(User.details()["is_mfa_active"])                                                                      │
│                                                                                                                 │
│     # Enable MFA for the user                                                                                   │
│     # The line below will generate a QR code. To finish the setup on your smartphone,                           │
│     # scan the QR code with an authenticator app like Google Authenticator and                                  │
│     # follow the on-device instructions                                                                         │
│     User.enable_mfa()                                                                                           │
│                                                                                                                 │
│     # After you've completed the setup, enter the current OTP from the authenticator                            │
│     # app to verify and enable MFA for your account                                                             │
│     User.activate_mfa(otp="{fill in otp}")                                                                      │
│                                                                                                                 │
│     # Check the current MFA status                                                                              │
│     # The is_mfa_active flag should be set to True, if the setup is successful                                  │
│     print(User.details()["is_mfa_active"])                                                                      │
│                                                                                                                 │
│ ╭────────────────────────────────────────────────── stdout ───────────────────────────────────────────────────╮ │
│ │ False                                                                                                       │ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭───────────────────────────────────────────── stderr supressed ──────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</pre>

<div class="highlight"><pre><span></span><code><span class="c1"># Run example for User.enable_sso</span>
<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">run_examples_from_docstring</span><span class="p">(</span>
        <span class="n">User</span><span class="o">.</span><span class="n">enable_sso</span><span class="p">,</span>
        <span class="n">username</span><span class="o">=</span><span class="n">username_for_new_test_user</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="n">password_for_new_test_user</span><span class="p">,</span>
        <span class="n">sso_email</span><span class="o">=</span><span class="s2">&quot;sso_email@mail.com&quot;</span><span class="p">,</span>
        <span class="n">supress_stderr</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;module&gt;:3: No type or annotation for parameter &#39;sso_provider&#39;
&lt;module&gt;:5: No type or annotation for parameter &#39;sso_email&#39;
&lt;module&gt;:6: No type or annotation for parameter &#39;otp&#39;
&lt;module&gt;:10: No type or annotation for returned value 1
</code></pre></div>
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">╭─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Example:                                                                                                        │
│                                                                                                                 │
│     # Importing necessary libraries                                                                             │
│     from  airt.client import User, Client                                                                       │
│                                                                                                                 │
│     # Authenticate                                                                                              │
│     Client.get_token(username="{fill in username}", password="{fill in password}")                              │
│                                                                                                                 │
│     # Enable single sign-on (SSO) and use google as the provider                                                │
│     sso_provider="google"                                                                                       │
│     sso_email="{fill in sso_email}"                                                                             │
│     User.enable_sso(sso_provider=sso_provider, sso_email=sso_email)                                             │
│                                                                                                                 │
│     # Authenticate using Single sign-on (SSO)                                                                   │
│     # To generate a token using SSO, you must first authenticate with the provider.                             │
│     # The command below will generate an authorization URL for you.                                             │
│     # Please copy and paste it into your preferred browser and complete the                                     │
│     # SSO provider authentication within 10 minutes. Otherwise, the SSO login                                   │
│     # will time out and you will need to call the get_token method again.                                       │
│     sso_url = Client.get_token(sso_provider=sso_provider)                                                       │
│     print(sso_url)                                                                                              │
│                                                                                                                 │
│     # Once the provider authentication is successful, call the below method to                                  │
│     # set the generated token                                                                                   │
│     Client.set_sso_token()                                                                                      │
│                                                                                                                 │
│     # If set_sso_token fails, the line below will throw an error.                                               │
│     print(User.details())                                                                                       │
│                                                                                                                 │
│ ╭────────────────────────────────────────────────── stdout ───────────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭───────────────────────────────────────────── stderr supressed ──────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</pre>

<div class="highlight"><pre><span></span><code><span class="c1"># Run example for User.disable_sso</span>
<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">run_examples_from_docstring</span><span class="p">(</span>
        <span class="n">User</span><span class="o">.</span><span class="n">disable_sso</span><span class="p">,</span>
        <span class="n">username</span><span class="o">=</span><span class="n">username_for_new_test_user</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="n">password_for_new_test_user</span><span class="p">,</span>
        <span class="n">sso_provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span>
        <span class="n">sso_email</span><span class="o">=</span><span class="s2">&quot;sso_email@mail.com&quot;</span><span class="p">,</span>
        <span class="n">supress_stderr</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;module&gt;:6: No type or annotation for parameter &#39;sso_provider&#39;
&lt;module&gt;:8: No type or annotation for parameter &#39;user&#39;
&lt;module&gt;:10: No type or annotation for parameter &#39;otp&#39;
&lt;module&gt;:14: No type or annotation for returned value 1
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
</code></pre></div>
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">╭─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Example:                                                                                                        │
│                                                                                                                 │
│     # Importing necessary libraries                                                                             │
│     from  airt.client import User, Client                                                                       │
│                                                                                                                 │
│     # Authenticate                                                                                              │
│     Client.get_token(username="{fill in username}", password="{fill in password}")                              │
│                                                                                                                 │
│     # Optional Step: For demonstration purpose, enable Single sign-on (SSO)                                     │
│     # for the user                                                                                              │
│     sso_provider="{fill in sso_provider}"                                                                       │
│     sso_email="{fill in sso_email}"                                                                             │
│     User.enable_sso(sso_provider=sso_provider, sso_email=sso_email)                                             │
│     sso_url = Client.get_token(sso_provider=sso_provider) # Authenticate using SSO                              │
│     print(sso_url)                                                                                              │
│     Client.set_sso_token() # Set SSO token                                                                      │
│                                                                                                                 │
│     # Disable the Single sign-on (SSO) for the provider                                                         │
│     print(User.disable_sso(sso_provider=sso_provider))                                                          │
│                                                                                                                 │
│     # If you try to disable an already disabled SSO provider, an exception                                      │
│     # will be raised                                                                                            │
│     try:                                                                                                        │
│         User.disable_sso(sso_provider=sso_provider)                                                             │
│         print("Should not print this, the above line should raise an exception")                                │
│         raise RuntimeException()                                                                                │
│                                                                                                                 │
│     except ValueError as e:                                                                                     │
│         print("Expected to fail, everything is fine")                                                           │
│                                                                                                                 │
│ ╭────────────────────────────────────────────────── stdout ───────────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭───────────────────────────────────────────── stderr supressed ──────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</pre>

<div class="highlight"><pre><span></span><code><span class="c1"># Run example for User.update</span>

<span class="n">run_examples_from_docstring</span><span class="p">(</span>
    <span class="n">User</span><span class="o">.</span><span class="n">update</span><span class="p">,</span>
    <span class="n">username</span><span class="o">=</span><span class="n">username_for_new_test_user</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="n">password_for_new_test_user</span><span class="p">,</span>
    <span class="n">new_email</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">@email.com&quot;</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;module&gt;:6: No type or annotation for parameter &#39;user&#39;
&lt;module&gt;:8: No type or annotation for parameter &#39;username&#39;
&lt;module&gt;:9: No type or annotation for parameter &#39;first_name&#39;
&lt;module&gt;:10: No type or annotation for parameter &#39;last_name&#39;
&lt;module&gt;:11: No type or annotation for parameter &#39;email&#39;
&lt;module&gt;:12: No type or annotation for parameter &#39;otp&#39;
&lt;module&gt;:16: No type or annotation for returned value 1
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
</code></pre></div>
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">╭─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Example:                                                                                                        │
│                                                                                                                 │
│     # Importing necessary libraries                                                                             │
│     from  airt.client import User, Client                                                                       │
│                                                                                                                 │
│     # Authenticate                                                                                              │
│     Client.get_token(username="{fill in username}", password="{fill in password}")                              │
│                                                                                                                 │
│     # Display the registered email address of the logged-in user                                                │
│     print(User.details()["email"])                                                                              │
│                                                                                                                 │
│     # Update the logged-in user's email address                                                                 │
│     # If you are a super user, you can update the details of other users by                                     │
│     # passing their uuid/username in the user parameter                                                         │
│     email = "{fill in new_email}"                                                                               │
│     User.update(email=email)                                                                                    │
│                                                                                                                 │
│     # Check whether the email address has been updated for the logged-in user                                   │
│     print(User.details()["email"])                                                                              │
│                                                                                                                 │
│     # If you try to use an already used email address, an exception will be raised.                             │
│     try:                                                                                                        │
│         User.update(email=email)                                                                                │
│         print("Should not print this, the above line should raise an exception")                                │
│         raise RuntimeException()                                                                                │
│                                                                                                                 │
│     except ValueError as e:                                                                                     │
│         print("Expected to fail, everything is fine")                                                           │
│                                                                                                                 │
│ ╭────────────────────────────────────────────────── stdout ───────────────────────────────────────────────────╮ │
│ │ random_user_4408_9299@email.com                                                                             │ │
│ │ random_user_6228_1855@email.com                                                                             │ │
│ │ Expected to fail, everything is fine                                                                        │ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭────────────────────────────────────────────────── stderr ───────────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</pre>

<div class="highlight"><pre><span></span><code><span class="c1"># Run example for User.details</span>

<span class="n">run_examples_from_docstring</span><span class="p">(</span>
    <span class="n">User</span><span class="o">.</span><span class="n">details</span><span class="p">,</span>
    <span class="n">username</span><span class="o">=</span><span class="n">username_for_new_test_user</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="n">password_for_new_test_user</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;module&gt;:6: No type or annotation for parameter &#39;user&#39;
&lt;module&gt;:10: No type or annotation for returned value 1
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
</code></pre></div>
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">╭─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Example:                                                                                                        │
│                                                                                                                 │
│                                                                                                                 │
│     # Importing necessary libraries                                                                             │
│     from  airt.client import User, Client                                                                       │
│                                                                                                                 │
│     # Authenticate                                                                                              │
│     Client.get_token(username="{fill in username}", password="{fill in password}")                              │
│                                                                                                                 │
│     # Display the uuid of logged-in user                                                                        │
│     # If you are a super user, you can view the details of other users by                                       │
│     # passing their uuid/username in the user parameter.                                                        │
│     user_details = User.details()                                                                               │
│     print(user_details["uuid"])                                                                                 │
│                                                                                                                 │
│     # If a Non-super user tries to access other user's detail,                                                  │
│     # an exception will be thrown.                                                                              │
│     try:                                                                                                        │
│         User.details(user="some_other_username")                                                                │
│         print("Should not print this, the above line should raise an exception")                                │
│         raise RuntimeException()                                                                                │
│                                                                                                                 │
│     except ValueError as e:                                                                                     │
│         print("Expected to fail, everything is fine")                                                           │
│                                                                                                                 │
│ ╭────────────────────────────────────────────────── stdout ───────────────────────────────────────────────────╮ │
│ │ bf2dc2ee-960f-4fff-bcca-ba4402fd67bf                                                                        │ │
│ │ Expected to fail, everything is fine                                                                        │ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭────────────────────────────────────────────────── stderr ───────────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</pre>

<div class="highlight"><pre><span></span><code><span class="c1"># Run example for User.register_phone_number</span>
<span class="c1"># The below example will throw Incorrect username or password, thats expected because</span>
<span class="c1"># if we send valid username and password, the sms will be sent to the passed phone number.</span>
<span class="c1"># We don&#39;t want to send the SMS each time we run the tests</span>
<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">invalid_phone_number</span> <span class="o">=</span> <span class="s2">&quot;910000000000&quot;</span>
    <span class="n">invalid_otp</span> <span class="o">=</span> <span class="s2">&quot;000000&quot;</span>
    <span class="n">run_examples_from_docstring</span><span class="p">(</span>
        <span class="n">User</span><span class="o">.</span><span class="n">register_phone_number</span><span class="p">,</span>
        <span class="n">username</span><span class="o">=</span><span class="s2">&quot;invalid_username&quot;</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;invalid_username&quot;</span><span class="p">,</span>
        <span class="n">phone_number</span><span class="o">=</span><span class="n">invalid_phone_number</span><span class="p">,</span>
        <span class="n">otp</span><span class="o">=</span><span class="n">invalid_otp</span><span class="p">,</span>
        <span class="n">supress_stderr</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;module&gt;:8: No type or annotation for parameter &#39;phone_number&#39;
&lt;module&gt;:13: No type or annotation for parameter &#39;otp&#39;
&lt;module&gt;:17: No type or annotation for returned value 1
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
</code></pre></div>
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">╭─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Example:                                                                                                        │
│                                                                                                                 │
│     # Importing necessary libraries                                                                             │
│     from  airt.client import Client, User                                                                       │
│                                                                                                                 │
│     # Authenticate                                                                                              │
│     Client.get_token(username="{fill in username}", password="{fill in password}")                              │
│                                                                                                                 │
│     # Display the phone number that is currently registered                                                     │
│     # If no phone number has been registered, None will be displayed                                            │
│     print(User.details()["phone_number"])                                                                       │
│                                                                                                                 │
│     # Register a new phone number.                                                                              │
│     # If you only want to validate an existing phone number, call the                                           │
│     # method below without the phone_number parameter                                                           │
│     User.register_phone_number(phone_number="{fill in phone_number}")                                           │
│                                                                                                                 │
│     # The above method will send the OTP via SMS to the specified phone number,                                 │
│     # which you must enter below to complete the registration process                                           │
│     User.validate_phone_number(otp="{fill in otp}")                                                             │
│                                                                                                                 │
│     # Check whether the phone number has been updated and verified                                              │
│     # The is_phone_number_verified flag should be set to True, if the                                           │
│     # registration is successful                                                                                │
│     user_details = User.details()                                                                               │
│     print(user_details["phone_number"])                                                                         │
│     print(user_details["is_phone_number_verified"])                                                             │
│                                                                                                                 │
│ ╭────────────────────────────────────────────────── stdout ───────────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭───────────────────────────────────────────── stderr supressed ──────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</pre>

<div class="highlight"><pre><span></span><code><span class="c1"># Run example for User.validate_phone_number</span>
<span class="c1"># The below example will throw Incorrect username or password, thats expected because</span>
<span class="c1"># if we send valid username and password, the OTP will be verified with the messaging service</span>
<span class="c1"># We don&#39;t want to send an external call each time we run the tests</span>
<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">invalid_phone_number</span> <span class="o">=</span> <span class="s2">&quot;910000000000&quot;</span>
    <span class="n">invalid_otp</span> <span class="o">=</span> <span class="s2">&quot;000000&quot;</span>
    <span class="n">run_examples_from_docstring</span><span class="p">(</span>
        <span class="n">User</span><span class="o">.</span><span class="n">validate_phone_number</span><span class="p">,</span>
        <span class="n">username</span><span class="o">=</span><span class="s2">&quot;invalid_username&quot;</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;invalid_username&quot;</span><span class="p">,</span>
        <span class="n">phone_number</span><span class="o">=</span><span class="n">invalid_phone_number</span><span class="p">,</span>
        <span class="n">otp</span><span class="o">=</span><span class="n">invalid_otp</span><span class="p">,</span>
        <span class="n">supress_stderr</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;module&gt;:6: No type or annotation for parameter &#39;otp&#39;
&lt;module&gt;:9: No type or annotation for returned value 1
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
</code></pre></div>
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">╭─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Example:                                                                                                        │
│                                                                                                                 │
│     # Importing necessary libraries                                                                             │
│     from  airt.client import Client, User                                                                       │
│                                                                                                                 │
│     # Authenticate                                                                                              │
│     Client.get_token(username="{fill in username}", password="{fill in password}")                              │
│                                                                                                                 │
│     # Display the phone number that is currently registered                                                     │
│     # If no phone number has been registered, None will be displayed                                            │
│     print(User.details()["phone_number"])                                                                       │
│                                                                                                                 │
│     # Register a new phone number.                                                                              │
│     # If you only want to validate an existing phone number, call the                                           │
│     # method below without the phone_number parameter                                                           │
│     User.register_phone_number(phone_number="{fill in phone_number}")                                           │
│                                                                                                                 │
│     # The above method will send the OTP via SMS to the specified phone number,                                 │
│     # which you must enter below to complete the registration process                                           │
│     User.validate_phone_number(otp="{fill in otp}")                                                             │
│                                                                                                                 │
│     # Check whether the phone number has been updated and verified                                              │
│     # The is_phone_number_verified flag should be set to True, if the                                           │
│     # registration is successful                                                                                │
│     user_details = User.details()                                                                               │
│     print(user_details["phone_number"])                                                                         │
│     print(user_details["is_phone_number_verified"])                                                             │
│                                                                                                                 │
│ ╭────────────────────────────────────────────────── stdout ───────────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭───────────────────────────────────────────── stderr supressed ──────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</pre>

<div class="highlight"><pre><span></span><code><span class="c1"># Run example for User.disable</span>

<span class="n">username</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">SERVICE_SUPER_USER</span><span class="p">]</span>
<span class="n">password</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">SERVICE_PASSWORD</span><span class="p">]</span>
<span class="n">username_for_new_test_user</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="n">password_for_new_test_user</span> <span class="o">=</span> <span class="s2">&quot;example_password&quot;</span>

<span class="n">run_examples_from_docstring</span><span class="p">(</span>
    <span class="n">User</span><span class="o">.</span><span class="n">disable</span><span class="p">,</span>
    <span class="n">super_user_username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span>
    <span class="n">super_user_password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span>
    <span class="n">username</span><span class="o">=</span><span class="n">username_for_new_test_user</span><span class="p">,</span>
    <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;example_first_name&quot;</span><span class="p">,</span>
    <span class="n">last_name</span><span class="o">=</span><span class="s2">&quot;example_last_name&quot;</span><span class="p">,</span>
    <span class="n">email</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">@email.com&quot;</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="n">password_for_new_test_user</span><span class="p">,</span>
    <span class="n">subscription_type</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;module&gt;:5: No type or annotation for parameter &#39;user&#39;
&lt;module&gt;:6: No type or annotation for parameter &#39;otp&#39;
&lt;module&gt;:10: No type or annotation for returned value 1
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
</code></pre></div>
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">╭─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Example:                                                                                                        │
│                                                                                                                 │
│     # Importing necessary libraries                                                                             │
│     from  airt.client import Client, User                                                                       │
│                                                                                                                 │
│     # Authenticate with super user privileges                                                                   │
│     Client.get_token(                                                                                           │
│         username="{fill in super_user_username}",                                                               │
│         password="{fill in super_user_password}"                                                                │
│     )                                                                                                           │
│                                                                                                                 │
│     # Optional Step: For demonstration purpose, create a new user                                               │
│     username = "{fill in username}"                                                                             │
│     User.create(                                                                                                │
│         username=username,                                                                                      │
│         first_name="{fill in first_name}",                                                                      │
│         last_name="{fill in last_name}",                                                                        │
│         email="{fill in email}",                                                                                │
│         password="{fill in password}",                                                                          │
│         subscription_type="{fill in subscription_type}",                                                        │
│     )                                                                                                           │
│                                                                                                                 │
│     # Display the details of the user you want to disable using their username/uuid                             │
│     print(User.details(username))                                                                               │
│                                                                                                                 │
│     # Disable the user                                                                                          │
│     # To disable multiple users, pass a list of username/uuid                                                   │
│     User.disable(user=username)                                                                                 │
│                                                                                                                 │
│     # Check whether the user has been disabled                                                                  │
│     # The disabled flag should be set to True, if the disable was sucessful                                     │
│     print(User.details(username))                                                                               │
│                                                                                                                 │
│ ╭────────────────────────────────────────────────── stdout ───────────────────────────────────────────────────╮ │
│ │ {'username': 'random_user_2967_8462', 'first_name': 'example_first_name', 'last_name': 'example_last_name', │ │
│ │ 'email': 'random_user_2251_5932@email.com', 'subscription_type': 'test', 'super_user': False,               │ │
│ │ 'phone_number': None, 'uuid': '9b3fa44c-b8e0-40b6-91ad-01b06e35ed6e', 'disabled': False, 'created':         │ │
│ │ '2022-10-27T08:41:50', 'is_phone_number_verified': False, 'is_mfa_active': False}                           │ │
│ │ {'username': 'random_user_2967_8462', 'first_name': 'example_first_name', 'last_name': 'example_last_name', │ │
│ │ 'email': 'random_user_2251_5932@email.com', 'subscription_type': 'test', 'super_user': False,               │ │
│ │ 'phone_number': None, 'uuid': '9b3fa44c-b8e0-40b6-91ad-01b06e35ed6e', 'disabled': True, 'created':          │ │
│ │ '2022-10-27T08:41:50', 'is_phone_number_verified': False, 'is_mfa_active': False}                           │ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭────────────────────────────────────────────────── stderr ───────────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</pre>

<div class="highlight"><pre><span></span><code><span class="c1"># Run example for User.enable</span>

<span class="n">username</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">SERVICE_SUPER_USER</span><span class="p">]</span>
<span class="n">password</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">SERVICE_PASSWORD</span><span class="p">]</span>
<span class="n">username_for_new_test_user</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="n">password_for_new_test_user</span> <span class="o">=</span> <span class="s2">&quot;example_password&quot;</span>

<span class="n">run_examples_from_docstring</span><span class="p">(</span>
    <span class="n">User</span><span class="o">.</span><span class="n">enable</span><span class="p">,</span>
    <span class="n">super_user_username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span>
    <span class="n">super_user_password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span>
    <span class="n">username</span><span class="o">=</span><span class="n">username_for_new_test_user</span><span class="p">,</span>
    <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;example_first_name&quot;</span><span class="p">,</span>
    <span class="n">last_name</span><span class="o">=</span><span class="s2">&quot;example_last_name&quot;</span><span class="p">,</span>
    <span class="n">email</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">@email.com&quot;</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="n">password_for_new_test_user</span><span class="p">,</span>
    <span class="n">subscription_type</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;module&gt;:5: No type or annotation for parameter &#39;user&#39;
&lt;module&gt;:6: No type or annotation for parameter &#39;otp&#39;
&lt;module&gt;:10: No type or annotation for returned value 1
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
Failed to parse annotation from &#39;Name&#39; node: &#39;NoneType&#39; object has no attribute &#39;resolve&#39;
</code></pre></div>
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">╭─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Example:                                                                                                        │
│                                                                                                                 │
│     # Importing necessary libraries                                                                             │
│     from  airt.client import Client, User                                                                       │
│                                                                                                                 │
│     # Authenticate with super user privileges                                                                   │
│     Client.get_token(                                                                                           │
│         username="{fill in super_user_username}",                                                               │
│         password="{fill in super_user_password}"                                                                │
│     )                                                                                                           │
│                                                                                                                 │
│     # Optional Step: For demonstration purpose, create a new user and disable them                              │
│     username = "{fill in username}"                                                                             │
│     User.create(                                                                                                │
│         username=username,                                                                                      │
│         first_name="{fill in first_name}",                                                                      │
│         last_name="{fill in last_name}",                                                                        │
│         email="{fill in email}",                                                                                │
│         password="{fill in password}",                                                                          │
│         subscription_type="{fill in subscription_type}",                                                        │
│     )                                                                                                           │
│     User.disable(user=username)                                                                                 │
│                                                                                                                 │
│     # Display the details of the user you want to enable using their username/uuid                              │
│     print(User.details(username))                                                                               │
│                                                                                                                 │
│     # Enable the user                                                                                           │
│     # To enable multiple users, pass a list of username/uuid                                                    │
│     User.enable(user=username)                                                                                  │
│                                                                                                                 │
│     # Check whether the user has been enabled                                                                   │
│     # The disabled flag should be set to False, if the enable was sucessful                                     │
│     print(User.details(username))                                                                               │
│                                                                                                                 │
│                                                                                                                 │
│ ╭────────────────────────────────────────────────── stdout ───────────────────────────────────────────────────╮ │
│ │ {'username': 'random_user_5515_970', 'first_name': 'example_first_name', 'last_name': 'example_last_name',  │ │
│ │ 'email': 'random_user_6419_7162@email.com', 'subscription_type': 'test', 'super_user': False,               │ │
│ │ 'phone_number': None, 'uuid': '781ffa49-c7f8-4ed6-9968-37600660e393', 'disabled': True, 'created':          │ │
│ │ '2022-10-27T08:41:52', 'is_phone_number_verified': False, 'is_mfa_active': False}                           │ │
│ │ {'username': 'random_user_5515_970', 'first_name': 'example_first_name', 'last_name': 'example_last_name',  │ │
│ │ 'email': 'random_user_6419_7162@email.com', 'subscription_type': 'test', 'super_user': False,               │ │
│ │ 'phone_number': None, 'uuid': '781ffa49-c7f8-4ed6-9968-37600660e393', 'disabled': False, 'created':         │ │
│ │ '2022-10-27T08:41:52', 'is_phone_number_verified': False, 'is_mfa_active': False}                           │ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭────────────────────────────────────────────────── stderr ───────────────────────────────────────────────────╮ │
│ │                                                                                                             │ │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</pre>

<div class="highlight"><pre><span></span><code><span class="c1"># A helper context manager for logging as super user and accessing user routes.</span>


<span class="nd">@contextmanager</span>
<span class="k">def</span> <span class="nf">super_user</span><span class="p">():</span>
    <span class="c1"># 1. Get token</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">SERVICE_SUPER_USER</span><span class="p">]</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">SERVICE_PASSWORD</span><span class="p">]</span>

    <span class="n">Client</span><span class="o">.</span><span class="n">get_token</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>

    <span class="k">yield</span>


<span class="k">with</span> <span class="n">super_user</span><span class="p">():</span>
    <span class="n">server</span><span class="p">,</span> <span class="n">auth_token</span> <span class="o">=</span> <span class="n">Client</span><span class="o">.</span><span class="n">_get_server_url_and_token</span><span class="p">()</span>

    <span class="n">display</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">server</span><span class="p">)</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">auth_token</span><span class="p">)</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">server</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">auth_token</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&#39;len(server)=24&#39;

&#39;len(auth_token)=127&#39;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># tests for reset_password</span>
<span class="n">username</span> <span class="o">=</span> <span class="s2">&quot;invalid_username&quot;</span>
<span class="n">new_password</span> <span class="o">=</span> <span class="s2">&quot;new_password&quot;</span>
<span class="n">invalid_otp</span> <span class="o">=</span> <span class="s2">&quot;123456&quot;</span>
<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">User</span><span class="o">.</span><span class="n">reset_password</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">new_password</span><span class="p">,</span> <span class="n">invalid_otp</span><span class="p">)</span>

<span class="k">assert</span> <span class="s2">&quot;Something went wrong&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&#39;Something went wrong. The username or OTP you entered is incorrect. Please try again or contact your administrator.&#39;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># tests for send_sms_otp</span>
<span class="n">username</span> <span class="o">=</span> <span class="s2">&quot;invalid_username&quot;</span>
<span class="n">message_template_name</span> <span class="o">=</span> <span class="s2">&quot;message_template_name&quot;</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">send_sms_otp</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">message_template_name</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span>
<span class="k">assert</span> <span class="s2">&quot;If you have already registered and verified your phone number&quot;</span> <span class="ow">in</span> <span class="n">actual</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&#39;If you have already registered and verified your phone number, you will receive the OTP by SMS. If you did not receive the OTP, please contact your administrator.&#39;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Tests for User.details</span>

<span class="c1"># Positive scenarios: Super user trying to access their user details</span>

<span class="k">with</span> <span class="n">super_user</span><span class="p">():</span>
    <span class="c1"># Positive scenario: Super user trying to access their user details</span>
    <span class="n">actual</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">details</span><span class="p">()</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">32</span>

    <span class="n">actual</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">details</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">actual</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">])</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">32</span>

    <span class="n">actual</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">details</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">actual</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">])</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">32</span>

    <span class="c1"># Positive scenario: Super user trying to access other user details</span>
    <span class="n">other_user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">ls</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">actual</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">details</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">other_user</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">actual</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">other_user</span><span class="o">.</span><span class="n">uuid</span>

    <span class="c1"># Negative scenario: Super user trying to access invalid user details</span>
    <span class="n">random_user_name</span> <span class="o">=</span> <span class="s2">&quot;random_user_name&quot;</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">User</span><span class="o">.</span><span class="n">details</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">random_user_name</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">User</span><span class="o">.</span><span class="n">details</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">INVALID_UUID_FOR_TESTING</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&#39;Incorrect username. Please try again.&#39;

&#39;The user uuid is incorrect. Please try again.&#39;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Tests for User.details</span>

<span class="c1"># Authenticating as normal user</span>
<span class="n">username</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">SERVICE_USERNAME</span><span class="p">]</span>
<span class="n">password</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">SERVICE_PASSWORD</span><span class="p">]</span>
<span class="n">Client</span><span class="o">.</span><span class="n">get_token</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>

<span class="c1"># Positive scenario: Normal user trying to access their user details</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">details</span><span class="p">()</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">32</span>

<span class="n">actual</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">details</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">actual</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">])</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">32</span>

<span class="n">actual</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">details</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">actual</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">])</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">32</span>
<span class="n">actual</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">]</span>

<span class="c1"># Negative scenarios: Normal user trying to access other user details</span>
<span class="n">random_user_name</span> <span class="o">=</span> <span class="s2">&quot;random_user_name&quot;</span>
<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">User</span><span class="o">.</span><span class="n">details</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">random_user_name</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;Insufficient permission to access other user&#39;s data&quot;</span>
<span class="n">display</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>


<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">User</span><span class="o">.</span><span class="n">details</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">INVALID_UUID_FOR_TESTING</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;Insufficient permission to access other user&#39;s data&quot;</span>
<span class="n">display</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&quot;Insufficient permission to access other user&#39;s data&quot;

&quot;Insufficient permission to access other user&#39;s data&quot;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Testing negative scenario. Non-super user trying to create a new user</span>
<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">User</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">username</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;example_first_name&quot;</span><span class="p">,</span>
        <span class="n">last_name</span><span class="o">=</span><span class="s2">&quot;example_last_name&quot;</span><span class="p">,</span>
        <span class="n">email</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">@email.com&quot;</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;example_password&quot;</span><span class="p">,</span>
        <span class="n">super_user</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">subscription_type</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&#39;You do not have sufficient permission to access this route. Please contact your administrator for help.&#39;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># tests for User.create</span>

<span class="c1"># Positive Scenario. Create a new user</span>

<span class="k">with</span> <span class="n">super_user</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">ph</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;+44123456789&quot;</span><span class="p">,</span> <span class="s2">&quot;0044123456789&quot;</span><span class="p">,</span> <span class="s2">&quot;44123456789&quot;</span><span class="p">]:</span>
        <span class="n">_user_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">_email</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">@email.com&quot;</span>

        <span class="n">response_df</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">username</span><span class="o">=</span><span class="n">_user_name</span><span class="p">,</span>
            <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;random_first_name&quot;</span><span class="p">,</span>
            <span class="n">last_name</span><span class="o">=</span><span class="s2">&quot;random_last_name&quot;</span><span class="p">,</span>
            <span class="n">email</span><span class="o">=</span><span class="n">_email</span><span class="p">,</span>
            <span class="n">password</span><span class="o">=</span><span class="s2">&quot;random_password&quot;</span><span class="p">,</span>
            <span class="n">super_user</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">phone_number</span><span class="o">=</span><span class="n">ph</span><span class="p">,</span>
            <span class="n">subscription_type</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">display</span><span class="p">(</span><span class="n">response_df</span><span class="p">[[</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">,</span> <span class="s2">&quot;phone_number&quot;</span><span class="p">]])</span>
        <span class="k">assert</span> <span class="n">response_df</span><span class="p">[</span><span class="s2">&quot;phone_number&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;44123456789&quot;</span>

        <span class="k">assert</span> <span class="n">response_df</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">USER_COLS</span><span class="p">))</span>

        <span class="c1"># Trying to create new user with existing email and username</span>

        <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">User</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
                <span class="n">username</span><span class="o">=</span><span class="n">_user_name</span><span class="p">,</span>
                <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;random_first_name&quot;</span><span class="p">,</span>
                <span class="n">last_name</span><span class="o">=</span><span class="s2">&quot;random_last_name&quot;</span><span class="p">,</span>
                <span class="n">email</span><span class="o">=</span><span class="n">_email</span><span class="p">,</span>
                <span class="n">password</span><span class="o">=</span><span class="s2">&quot;random_password&quot;</span><span class="p">,</span>
                <span class="n">super_user</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">subscription_type</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">display</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

|     | uuid                                 | created             | phone_number |
|-----|--------------------------------------|---------------------|--------------|
| 0   | 9147b0a7-f8e4-46db-9935-7f90434c99ab | 2022-10-27T08:41:54 | 44123456789  |

</div>

<div class="highlight"><pre><span></span><code>&#39;The requested username or email already exists. Try another.&#39;
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

|     | uuid                                 | created             | phone_number |
|-----|--------------------------------------|---------------------|--------------|
| 0   | 74b06ad9-5eea-4276-8ba1-47d39464d6aa | 2022-10-27T08:41:54 | 44123456789  |

</div>

<div class="highlight"><pre><span></span><code>&#39;The requested username or email already exists. Try another.&#39;
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

|     | uuid                                 | created             | phone_number |
|-----|--------------------------------------|---------------------|--------------|
| 0   | dead5d28-db6f-435c-b2fa-79cc62f19ac9 | 2022-10-27T08:41:55 | 44123456789  |

</div>

<div class="highlight"><pre><span></span><code>&#39;The requested username or email already exists. Try another.&#39;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># tests for User.create</span>

<span class="c1"># Negative Scenario. Passing wrong subscription_type</span>

<span class="k">with</span> <span class="n">super_user</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">User</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">username</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;random_first_name&quot;</span><span class="p">,</span>
            <span class="n">last_name</span><span class="o">=</span><span class="s2">&quot;random_last_name&quot;</span><span class="p">,</span>
            <span class="n">email</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">@email.com&quot;</span><span class="p">,</span>
            <span class="n">password</span><span class="o">=</span><span class="s2">&quot;random_password&quot;</span><span class="p">,</span>
            <span class="n">super_user</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">subscription_type</span><span class="o">=</span><span class="s2">&quot;fake-value&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">display</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="s2">&quot;value is not a valid enumeration member&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="c1"># Negative Scenario. Non-MFA user passing otp</span>

    <span class="n">random_otp</span> <span class="o">=</span> <span class="mi">123456</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">User</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">username</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;random_first_name&quot;</span><span class="p">,</span>
            <span class="n">last_name</span><span class="o">=</span><span class="s2">&quot;random_last_name&quot;</span><span class="p">,</span>
            <span class="n">email</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">@email.com&quot;</span><span class="p">,</span>
            <span class="n">password</span><span class="o">=</span><span class="s2">&quot;random_password&quot;</span><span class="p">,</span>
            <span class="n">super_user</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">subscription_type</span><span class="o">=</span><span class="s2">&quot;small&quot;</span><span class="p">,</span>
            <span class="n">otp</span><span class="o">=</span><span class="n">random_otp</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">display</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="s2">&quot;MFA is not activated for the account&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&#39;str(e.value)=\&#39;[{\\\&#39;loc\\\&#39;: [\\\&#39;body\\\&#39;, \\\&#39;subscription_type\\\&#39;], \\\&#39;msg\\\&#39;: &quot;value is not a valid enumeration member; permitted: \\\&#39;small\\\&#39;, \\\&#39;medium\\\&#39;, \\\&#39;large\\\&#39;, \\\&#39;infobip\\\&#39;, \\\&#39;captn\\\&#39;, \\\&#39;test\\\&#39;, \\\&#39;superuser\\\&#39;&quot;, \\\&#39;type\\\&#39;: \\\&#39;type_error.enum\\\&#39;, \\\&#39;ctx\\\&#39;: {\\\&#39;enum_values\\\&#39;: [\\\&#39;small\\\&#39;, \\\&#39;medium\\\&#39;, \\\&#39;large\\\&#39;, \\\&#39;infobip\\\&#39;, \\\&#39;captn\\\&#39;, \\\&#39;test\\\&#39;, \\\&#39;superuser\\\&#39;]}}]\&#39;&#39;

&quot;str(e.value)=&#39;MFA is not activated for the account. Please pass the OTP only after activating the MFA for your account.&#39;&quot;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Tests for User ls</span>

<span class="k">with</span> <span class="n">super_user</span><span class="p">():</span>
    <span class="n">ux</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">ls</span><span class="p">()</span>

    <span class="n">display</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">ux</span><span class="p">)</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">ux</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>

    <span class="c1"># Testing list with offset and limit</span>
    <span class="n">offset</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">limit</span> <span class="o">=</span> <span class="mi">3</span>

    <span class="n">ux</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">ls</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">)</span>

    <span class="n">display</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">ux</span><span class="p">)</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">ux</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">limit</span>

    <span class="c1"># Testing list with invalid offset and limit</span>
    <span class="n">offset</span> <span class="o">=</span> <span class="mi">1_000_000_000</span>
    <span class="n">limit</span> <span class="o">=</span> <span class="mi">3</span>

    <span class="n">ux</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">ls</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">)</span>

    <span class="n">display</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">ux</span><span class="p">)</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">ux</span> <span class="o">==</span> <span class="p">[]</span>

    <span class="c1"># Testing with disabled flag</span>

    <span class="n">all_ux</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">ls</span><span class="p">()</span>
    <span class="n">disabled_ux</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">ls</span><span class="p">(</span><span class="n">disabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">display</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">disabled_ux</span><span class="p">)</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">disabled_ux</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_ux</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">disabled_ux</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&#39;len(ux)=19&#39;

&#39;len(ux)=3&#39;

&#39;len(ux)=0&#39;

&#39;len(disabled_ux)=1&#39;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Tests for User.as_df:</span>

<span class="n">ux</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">ls</span><span class="p">()</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">as_df</span><span class="p">(</span><span class="n">ux</span><span class="p">)</span>

<span class="k">assert</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ux</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">USER_COLS</span><span class="p">))</span>

<span class="n">df</span><span class="p">[[</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">]]</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

|     | uuid                                 | created             |
|-----|--------------------------------------|---------------------|
| 0   | 7363f72b-7ebb-425c-832f-99c42fb7a016 | 2022-10-27T04:39:16 |
| 1   | 50f41000-10e1-42a4-96ca-8d693d4b9fa1 | 2022-10-27T04:39:16 |
| 2   | d882d2de-0a72-47df-9293-3a9f3563afea | 2022-10-27T04:39:16 |
| 3   | b418ccca-6e15-494d-bd82-4ba86d4b90f8 | 2022-10-27T08:22:26 |
| 4   | c1c80aa6-d29c-43c1-8cd5-ac122ef20041 | 2022-10-27T08:22:27 |
| 5   | 2ec752ef-1cd1-4659-9272-7b6bab5083cb | 2022-10-27T08:22:28 |
| 6   | 82435b53-fe09-4804-8c41-68850ecfb112 | 2022-10-27T08:22:29 |
| 7   | ef0e86a2-2641-4c40-b0f5-2ae1af4634fe | 2022-10-27T08:22:30 |
| 8   | 6a4cd131-9804-4d5a-8477-3a7124f353a6 | 2022-10-27T08:22:31 |
| 9   | f577a97f-1107-43b3-bbd5-0bd4c73cf1c0 | 2022-10-27T08:22:32 |
| 10  | dab20424-304f-4bcc-9e36-45b40364ae48 | 2022-10-27T08:28:24 |
| 11  | 449bee19-9078-4414-b0a8-141784aaee72 | 2022-10-27T08:30:37 |
| 12  | e8229346-51b9-4a7b-aaaf-55946b470e0e | 2022-10-27T08:30:44 |
| 13  | 6dc3e46b-d6da-41e0-a239-fbbc2e93fc30 | 2022-10-27T08:40:18 |
| 14  | bf2dc2ee-960f-4fff-bcca-ba4402fd67bf | 2022-10-27T08:41:39 |
| 15  | 781ffa49-c7f8-4ed6-9968-37600660e393 | 2022-10-27T08:41:52 |
| 16  | 9147b0a7-f8e4-46db-9935-7f90434c99ab | 2022-10-27T08:41:54 |
| 17  | 74b06ad9-5eea-4276-8ba1-47d39464d6aa | 2022-10-27T08:41:54 |
| 18  | dead5d28-db6f-435c-b2fa-79cc62f19ac9 | 2022-10-27T08:41:55 |

</div>

<div class="highlight"><pre><span></span><code><span class="c1"># Tests for User.as_df:</span>
<span class="c1"># Passing empty ux list</span>

<span class="n">ux</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">as_df</span><span class="p">(</span><span class="n">ux</span><span class="p">)</span>

<span class="k">assert</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ux</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">USER_COLS</span><span class="p">))</span>

<span class="n">df</span><span class="p">[[</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">]]</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

|     | uuid | created |
|-----|------|---------|

</div>

<div class="highlight"><pre><span></span><code><span class="c1"># tests for user.disable</span>

<span class="k">with</span> <span class="n">super_user</span><span class="p">():</span>
    <span class="c1"># create a new user</span>

    <span class="n">response_df</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">username</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;random_first_name&quot;</span><span class="p">,</span>
        <span class="n">last_name</span><span class="o">=</span><span class="s2">&quot;random_last_name&quot;</span><span class="p">,</span>
        <span class="n">email</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">@email.com&quot;</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;random_password&quot;</span><span class="p">,</span>
        <span class="n">super_user</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">subscription_type</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">display</span><span class="p">(</span><span class="n">response_df</span><span class="p">[[</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">]])</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="n">response_df</span><span class="p">[</span><span class="s2">&quot;disabled&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># Disable the newly created user</span>

    <span class="n">disable_response</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">disable</span><span class="p">(</span><span class="n">response_df</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">display</span><span class="p">(</span><span class="n">disable_response</span><span class="p">[[</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">]])</span>
    <span class="k">assert</span> <span class="n">disable_response</span><span class="p">[</span><span class="s2">&quot;disabled&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># Disable already disabled user</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">User</span><span class="o">.</span><span class="n">disable</span><span class="p">(</span><span class="n">response_df</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">display</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>

    <span class="c1"># Negative Scenario. Non-MFA user passing otp</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">random_otp</span> <span class="o">=</span> <span class="mi">123456</span>
        <span class="n">User</span><span class="o">.</span><span class="n">disable</span><span class="p">(</span><span class="n">response_df</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">otp</span><span class="o">=</span><span class="n">random_otp</span><span class="p">)</span>

    <span class="n">display</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

|     | uuid                                 | created             |
|-----|--------------------------------------|---------------------|
| 0   | e2e3cf00-2368-406c-9dad-d16159e1c562 | 2022-10-27T08:41:56 |

</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

|     | uuid                                 | created             |
|-----|--------------------------------------|---------------------|
| 0   | e2e3cf00-2368-406c-9dad-d16159e1c562 | 2022-10-27T08:41:56 |

</div>

<div class="highlight"><pre><span></span><code>&#39;The user has already been disabled.&#39;

&#39;MFA is not activated for the account. Please pass the OTP only after activating the MFA for your account.&#39;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="k">with</span> <span class="n">super_user</span><span class="p">():</span>
    <span class="c1"># create a new user</span>

    <span class="n">user_1</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">username</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;random_first_name&quot;</span><span class="p">,</span>
        <span class="n">last_name</span><span class="o">=</span><span class="s2">&quot;random_last_name&quot;</span><span class="p">,</span>
        <span class="n">email</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">@email.com&quot;</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;random_password&quot;</span><span class="p">,</span>
        <span class="n">super_user</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">subscription_type</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">display</span><span class="p">(</span><span class="n">user_1</span><span class="p">[[</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">]])</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="n">user_1</span><span class="p">[</span><span class="s2">&quot;disabled&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># create a new user</span>

    <span class="n">user_2</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">username</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;random_first_name&quot;</span><span class="p">,</span>
        <span class="n">last_name</span><span class="o">=</span><span class="s2">&quot;random_last_name&quot;</span><span class="p">,</span>
        <span class="n">email</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">@email.com&quot;</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;random_password&quot;</span><span class="p">,</span>
        <span class="n">super_user</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">subscription_type</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">display</span><span class="p">(</span><span class="n">user_2</span><span class="p">[[</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">]])</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="n">user_2</span><span class="p">[</span><span class="s2">&quot;disabled&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># Disable the newly created user</span>

    <span class="n">disable_response</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">disable</span><span class="p">([</span><span class="n">user_1</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">user_2</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]])</span>

    <span class="n">display</span><span class="p">(</span><span class="n">disable_response</span><span class="p">[[</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">]])</span>
    <span class="k">assert</span> <span class="n">disable_response</span><span class="p">[</span><span class="s2">&quot;disabled&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">assert</span> <span class="n">disable_response</span><span class="p">[</span><span class="s2">&quot;disabled&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">disable_response</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span>
    <span class="n">disable_response</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

|     | uuid                                 | created             |
|-----|--------------------------------------|---------------------|
| 0   | 9b15b7d2-1737-4c9d-8285-a4477d60d820 | 2022-10-27T08:41:57 |

</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

|     | uuid                                 | created             |
|-----|--------------------------------------|---------------------|
| 0   | 80cad6e8-d6aa-4753-936f-d04b56d890ab | 2022-10-27T08:41:57 |

</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

|     | uuid                                 | created             |
|-----|--------------------------------------|---------------------|
| 0   | 9b15b7d2-1737-4c9d-8285-a4477d60d820 | 2022-10-27T08:41:57 |
| 1   | 80cad6e8-d6aa-4753-936f-d04b56d890ab | 2022-10-27T08:41:57 |

</div>

<div class="highlight"><pre><span></span><code><span class="c1"># tests for user.enable</span>

<span class="k">with</span> <span class="n">super_user</span><span class="p">():</span>
    <span class="c1"># create a new user</span>

    <span class="n">response_df</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">username</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;random_first_name&quot;</span><span class="p">,</span>
        <span class="n">last_name</span><span class="o">=</span><span class="s2">&quot;random_last_name&quot;</span><span class="p">,</span>
        <span class="n">email</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">@email.com&quot;</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;random_password&quot;</span><span class="p">,</span>
        <span class="n">super_user</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">subscription_type</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Disable the newly created user</span>
    <span class="n">disable_response</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">disable</span><span class="p">(</span><span class="n">response_df</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">display</span><span class="p">(</span><span class="n">disable_response</span><span class="p">[[</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">]])</span>
    <span class="k">assert</span> <span class="n">disable_response</span><span class="p">[</span><span class="s2">&quot;disabled&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># Enable the disabled user</span>

    <span class="n">enable_response</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">enable</span><span class="p">(</span><span class="n">disable_response</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">display</span><span class="p">(</span><span class="n">enable_response</span><span class="p">[[</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">]])</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="n">enable_response</span><span class="p">[</span><span class="s2">&quot;disabled&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># Enable already enabled user</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">User</span><span class="o">.</span><span class="n">enable</span><span class="p">(</span><span class="n">enable_response</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">display</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

|     | uuid                                 | created             |
|-----|--------------------------------------|---------------------|
| 0   | 9b6d5893-fd2b-46a0-aca8-c0575d2899a9 | 2022-10-27T08:41:58 |

</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

|     | uuid                                 | created             |
|-----|--------------------------------------|---------------------|
| 0   | 9b6d5893-fd2b-46a0-aca8-c0575d2899a9 | 2022-10-27T08:41:58 |

</div>

<div class="highlight"><pre><span></span><code>&#39;The user has already been enabled.&#39;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># tests for user.enable. Enabling multiple users</span>

<span class="k">with</span> <span class="n">super_user</span><span class="p">():</span>
    <span class="c1"># create a new user</span>

    <span class="n">response_df_user_1</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">username</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;random_first_name&quot;</span><span class="p">,</span>
        <span class="n">last_name</span><span class="o">=</span><span class="s2">&quot;random_last_name&quot;</span><span class="p">,</span>
        <span class="n">email</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">@email.com&quot;</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;random_password&quot;</span><span class="p">,</span>
        <span class="n">super_user</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">subscription_type</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Disable the newly created user</span>
    <span class="n">disable_response_user_1</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">disable</span><span class="p">(</span><span class="n">response_df_user_1</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">display</span><span class="p">(</span><span class="n">disable_response_user_1</span><span class="p">[[</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">]])</span>
    <span class="k">assert</span> <span class="n">disable_response_user_1</span><span class="p">[</span><span class="s2">&quot;disabled&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># create a new user</span>

    <span class="n">response_df_user_2</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">username</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;random_first_name&quot;</span><span class="p">,</span>
        <span class="n">last_name</span><span class="o">=</span><span class="s2">&quot;random_last_name&quot;</span><span class="p">,</span>
        <span class="n">email</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">@email.com&quot;</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;random_password&quot;</span><span class="p">,</span>
        <span class="n">super_user</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">subscription_type</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Disable the newly created user</span>
    <span class="n">disable_response_user_2</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">disable</span><span class="p">(</span><span class="n">response_df_user_2</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">display</span><span class="p">(</span><span class="n">disable_response_user_2</span><span class="p">[[</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">]])</span>
    <span class="k">assert</span> <span class="n">disable_response_user_2</span><span class="p">[</span><span class="s2">&quot;disabled&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># Enable the disabled users</span>
    <span class="n">enable_response</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">enable</span><span class="p">(</span>
        <span class="p">[</span><span class="n">disable_response_user_1</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">disable_response_user_2</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span>
    <span class="p">)</span>

    <span class="n">display</span><span class="p">(</span><span class="n">enable_response</span><span class="p">[[</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">]])</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="n">enable_response</span><span class="p">[</span><span class="s2">&quot;disabled&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">enable_response</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span>
    <span class="n">enable_response</span>
    <span class="c1"># Negative Scenario. Non-MFA user passing otp</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">random_otp</span> <span class="o">=</span> <span class="mi">123456</span>
        <span class="n">User</span><span class="o">.</span><span class="n">enable</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">disable_response_user_1</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">disable_response_user_2</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
            <span class="p">],</span>
            <span class="n">otp</span><span class="o">=</span><span class="n">random_otp</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">display</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

|     | uuid                                 | created             |
|-----|--------------------------------------|---------------------|
| 0   | a2746326-0a5d-4aec-ad5b-30aaf3ed264f | 2022-10-27T08:41:58 |

</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

|     | uuid                                 | created             |
|-----|--------------------------------------|---------------------|
| 0   | 651f8d55-359b-4347-8422-62b7c03f0b0d | 2022-10-27T08:41:59 |

</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

|     | uuid                                 | created             |
|-----|--------------------------------------|---------------------|
| 0   | a2746326-0a5d-4aec-ad5b-30aaf3ed264f | 2022-10-27T08:41:58 |
| 1   | 651f8d55-359b-4347-8422-62b7c03f0b0d | 2022-10-27T08:41:59 |

</div>

<div class="highlight"><pre><span></span><code>&#39;MFA is not activated for the account. Please pass the OTP only after activating the MFA for your account.&#39;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># tests for User.update</span>

<span class="c1"># Testing positive scenario. Calling User.update as a super user</span>

<span class="k">with</span> <span class="n">super_user</span><span class="p">():</span>
    <span class="c1"># Creating a new user</span>

    <span class="n">_username</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">response_df</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">username</span><span class="o">=</span><span class="n">_username</span><span class="p">,</span>
        <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;random_first_name&quot;</span><span class="p">,</span>
        <span class="n">last_name</span><span class="o">=</span><span class="s2">&quot;random_last_name&quot;</span><span class="p">,</span>
        <span class="n">email</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">@email.com&quot;</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;random_password&quot;</span><span class="p">,</span>
        <span class="n">super_user</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">subscription_type</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">display</span><span class="p">(</span><span class="n">response_df</span><span class="p">[[</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">]])</span>

    <span class="k">assert</span> <span class="n">response_df</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">USER_COLS</span><span class="p">))</span>

    <span class="c1"># updating the user details as super user</span>
    <span class="n">_new_username</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">response_df</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">username</span><span class="o">=</span><span class="n">_new_username</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">_new_username</span>

    <span class="n">_new_lastname</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">_new_username</span><span class="p">,</span> <span class="n">last_name</span><span class="o">=</span><span class="n">_new_lastname</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">]])</span>
    <span class="k">assert</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;last_name&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">_new_lastname</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

|     | uuid                                 | created             |
|-----|--------------------------------------|---------------------|
| 0   | e0f7e48d-9a2f-44a1-94db-f22c9fa47932 | 2022-10-27T08:41:59 |

</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

|     | uuid                                 | created             |
|-----|--------------------------------------|---------------------|
| 0   | e0f7e48d-9a2f-44a1-94db-f22c9fa47932 | 2022-10-27T08:41:59 |

</div>

<div class="highlight"><pre><span></span><code><span class="c1"># tests for User.update</span>

<span class="c1"># Testing positive scenario. Calling User.update as a normal user</span>

<span class="n">new_user_details</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">with</span> <span class="n">super_user</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">new_user_details</span>

    <span class="c1"># Creating a new user</span>

    <span class="n">_username</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">_password</span> <span class="o">=</span> <span class="s2">&quot;password&quot;</span>

    <span class="n">response_df</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">username</span><span class="o">=</span><span class="n">_username</span><span class="p">,</span>
        <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;random_first_name&quot;</span><span class="p">,</span>
        <span class="n">last_name</span><span class="o">=</span><span class="s2">&quot;random_last_name&quot;</span><span class="p">,</span>
        <span class="n">email</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">@email.com&quot;</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="n">_password</span><span class="p">,</span>
        <span class="n">super_user</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">subscription_type</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">display</span><span class="p">(</span><span class="n">response_df</span><span class="p">[[</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">]])</span>

    <span class="n">new_user_details</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
        <span class="n">user</span><span class="o">=</span><span class="n">response_df</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">username</span><span class="o">=</span><span class="n">_username</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">_password</span>
    <span class="p">)</span>

    <span class="k">assert</span> <span class="n">response_df</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">USER_COLS</span><span class="p">))</span>


<span class="c1"># Authenticating with newely created user credentials</span>
<span class="n">Client</span><span class="o">.</span><span class="n">get_token</span><span class="p">(</span>
    <span class="n">username</span><span class="o">=</span><span class="n">new_user_details</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">],</span> <span class="n">password</span><span class="o">=</span><span class="n">new_user_details</span><span class="p">[</span><span class="s2">&quot;password&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># updating the user details</span>
<span class="n">_new_username</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="n">_new_first_name</span> <span class="o">=</span> <span class="s2">&quot;random_new_first_name&quot;</span>
<span class="n">_new_last_name</span> <span class="o">=</span> <span class="s2">&quot;random_last_first_name&quot;</span>
<span class="n">_new_email</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">@email.com&quot;</span>

<span class="n">response_df</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
    <span class="n">username</span><span class="o">=</span><span class="n">_new_username</span><span class="p">,</span>
    <span class="n">first_name</span><span class="o">=</span><span class="n">_new_first_name</span><span class="p">,</span>
    <span class="n">last_name</span><span class="o">=</span><span class="n">_new_last_name</span><span class="p">,</span>
    <span class="n">email</span><span class="o">=</span><span class="n">_new_email</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">response_df</span><span class="p">[[</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">]])</span>
<span class="k">assert</span> <span class="n">response_df</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">USER_COLS</span><span class="p">))</span>
<span class="k">assert</span> <span class="n">response_df</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">_new_username</span>
<span class="k">assert</span> <span class="n">response_df</span><span class="p">[</span><span class="s2">&quot;first_name&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">_new_first_name</span>
<span class="k">assert</span> <span class="n">response_df</span><span class="p">[</span><span class="s2">&quot;last_name&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">_new_last_name</span>
<span class="k">assert</span> <span class="n">response_df</span><span class="p">[</span><span class="s2">&quot;email&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">_new_email</span>


<span class="c1"># Authenticating with newly created password</span>
<span class="n">Client</span><span class="o">.</span><span class="n">get_token</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">_new_username</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">_password</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Masked token = </span><span class="si">{</span><span class="w"> </span><span class="s1">&#39;*&#39;</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">Client</span><span class="o">.</span><span class="n">auth_token</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">Client</span><span class="o">.</span><span class="n">auth_token</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">127</span>

<span class="c1"># Negative scenario: Non-super user trying to update other user details</span>
<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">User</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
        <span class="n">user</span><span class="o">=</span><span class="n">INVALID_UUID_FOR_TESTING</span><span class="p">,</span>
        <span class="n">username</span><span class="o">=</span><span class="n">_new_username</span><span class="p">,</span>
        <span class="n">first_name</span><span class="o">=</span><span class="n">_new_first_name</span><span class="p">,</span>
        <span class="n">last_name</span><span class="o">=</span><span class="n">_new_last_name</span><span class="p">,</span>
        <span class="n">email</span><span class="o">=</span><span class="n">_new_email</span><span class="p">,</span>
    <span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>

<span class="c1"># Negative Scenario. Non-MFA user passing otp</span>
<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">random_otp</span> <span class="o">=</span> <span class="mi">123456</span>
    <span class="n">User</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
        <span class="n">username</span><span class="o">=</span><span class="n">_new_username</span><span class="p">,</span>
        <span class="n">first_name</span><span class="o">=</span><span class="n">_new_first_name</span><span class="p">,</span>
        <span class="n">last_name</span><span class="o">=</span><span class="n">_new_last_name</span><span class="p">,</span>
        <span class="n">email</span><span class="o">=</span><span class="n">_new_email</span><span class="p">,</span>
        <span class="n">otp</span><span class="o">=</span><span class="n">random_otp</span><span class="p">,</span>
    <span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
<span class="k">assert</span> <span class="s2">&quot;MFA is not activated for the account.&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

|     | uuid                                 | created             |
|-----|--------------------------------------|---------------------|
| 0   | 9118e747-8948-405e-990c-37a7aaf92525 | 2022-10-27T08:42:00 |

</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

|     | uuid                                 | created             |
|-----|--------------------------------------|---------------------|
| 0   | 9118e747-8948-405e-990c-37a7aaf92525 | 2022-10-27T08:42:00 |

</div>

<div class="highlight"><pre><span></span><code>&#39;Masked token = *************************************************************************************************************************************************&#39;

&quot;Insufficient permission to access other user&#39;s data&quot;

&#39;MFA is not activated for the account. Please pass the OTP only after activating the MFA for your account.&#39;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Tests for _get_mfa_provision_url</span>

<span class="n">mfa_url</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">_get_mfa_provision_url</span><span class="p">()</span>
<span class="n">display</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;mfa_url: </span><span class="si">{</span><span class="s1">&#39;*&#39;</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">mfa_url</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">mfa_url</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&#39;mfa_url: ***************************************************************************************************************&#39;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Tests for enable_mfa</span>

<span class="n">qr_code</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">enable_mfa</span><span class="p">()</span>

<span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">qr_code</span><span class="p">)</span> <span class="o">==</span> <span class="n">PilImage</span>
<span class="nb">type</span><span class="p">(</span><span class="n">qr_code</span><span class="p">)</span>

<span class="c1"># Negative Scenario. Non-MFA user passing otp</span>
<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">random_otp</span> <span class="o">=</span> <span class="mi">123456</span>
    <span class="n">User</span><span class="o">.</span><span class="n">enable_mfa</span><span class="p">(</span><span class="n">otp</span><span class="o">=</span><span class="n">random_otp</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
<span class="k">assert</span> <span class="s2">&quot;MFA is not activated for the account.&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&#39;MFA is not activated for the account. Please pass the OTP only after activating the MFA for your account.&#39;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Tests for activate_mfa. Negative case</span>

<span class="n">random_otp</span> <span class="o">=</span> <span class="mi">123123</span>
<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">User</span><span class="o">.</span><span class="n">activate_mfa</span><span class="p">(</span><span class="n">otp</span><span class="o">=</span><span class="n">random_otp</span><span class="p">)</span>
<span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&#39;Invalid OTP. Please try again.&#39;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Tests for disable_mfa. Negative case: Non-MFA enabled user trying to disable MFA for self</span>
<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">User</span><span class="o">.</span><span class="n">disable_mfa</span><span class="p">()</span>

<span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;MFA is already disabled for the user&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

<span class="c1"># Tests for disable_mfa. Negative case: Normal user trying to disable MFA for other users</span>
<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">User</span><span class="o">.</span><span class="n">disable_mfa</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">INVALID_UUID_FOR_TESTING</span><span class="p">)</span>

<span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;Insufficient permission to access other user&#39;s data&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span>
    <span class="n">e</span><span class="o">.</span><span class="n">value</span>
<span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="s2">&quot;OK&quot;</span><span class="p">)</span>

<span class="c1"># Negative Scenario. Non-MFA user passing otp</span>
<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">random_otp</span> <span class="o">=</span> <span class="mi">123456</span>
    <span class="n">User</span><span class="o">.</span><span class="n">disable_mfa</span><span class="p">(</span><span class="n">otp</span><span class="o">=</span><span class="n">random_otp</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
<span class="k">assert</span> <span class="s2">&quot;MFA is not activated for the account.&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&#39;OK&#39;

&#39;MFA is not activated for the account. Please pass the OTP only after activating the MFA for your account.&#39;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># A helper context manager to create new users for testing</span>
<span class="nd">@contextmanager</span>
<span class="k">def</span> <span class="nf">create_normal_user_for_testing</span><span class="p">():</span>
    <span class="c1"># 1. Get Super user token</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">SERVICE_SUPER_USER</span><span class="p">]</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">SERVICE_PASSWORD</span><span class="p">]</span>

    <span class="n">Client</span><span class="o">.</span><span class="n">get_token</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>

    <span class="n">_user_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">_email</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;random_user_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">@email.com&quot;</span>
    <span class="n">_password</span> <span class="o">=</span> <span class="s2">&quot;random_password&quot;</span>

    <span class="n">response_df</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">username</span><span class="o">=</span><span class="n">_user_name</span><span class="p">,</span>
        <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;random_first_name&quot;</span><span class="p">,</span>
        <span class="n">last_name</span><span class="o">=</span><span class="s2">&quot;random_last_name&quot;</span><span class="p">,</span>
        <span class="n">email</span><span class="o">=</span><span class="n">_email</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="n">_password</span><span class="p">,</span>
        <span class="n">super_user</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">subscription_type</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1">#     display(response_df[[&quot;id&quot;, &quot;created&quot;]])</span>

    <span class="k">assert</span> <span class="n">response_df</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">USER_COLS</span><span class="p">))</span>

    <span class="n">Client</span><span class="o">.</span><span class="n">get_token</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">_user_name</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">_password</span><span class="p">)</span>

    <span class="k">yield</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Tests for disable_sso. Negative case: Non-SSO user trying to disable SSO for self</span>
<span class="k">with</span> <span class="n">create_normal_user_for_testing</span><span class="p">():</span>
    <span class="n">sso_provider</span> <span class="o">=</span> <span class="s2">&quot;google&quot;</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">User</span><span class="o">.</span><span class="n">disable_sso</span><span class="p">(</span><span class="n">sso_provider</span><span class="o">=</span><span class="n">sso_provider</span><span class="p">)</span>

    <span class="k">assert</span> <span class="s2">&quot;SSO is not enabled&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="c1"># Negative case: Normal user trying to disable SSO for other users</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">User</span><span class="o">.</span><span class="n">disable_sso</span><span class="p">(</span><span class="n">sso_provider</span><span class="o">=</span><span class="n">sso_provider</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">INVALID_UUID_FOR_TESTING</span><span class="p">)</span>

    <span class="k">assert</span> <span class="s2">&quot;Insufficient permission&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="s2">&quot;OK&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&#39;OK&#39;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Tests for enable_sso</span>
<span class="k">with</span> <span class="n">create_normal_user_for_testing</span><span class="p">():</span>
    <span class="c1"># Positive case: Non-MFA user enabling SSO</span>
    <span class="n">sso_email</span> <span class="o">=</span> <span class="s2">&quot;sso_email@mail.com&quot;</span>
    <span class="n">sso_provider</span> <span class="o">=</span> <span class="s2">&quot;google&quot;</span>
    <span class="n">actual</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">enable_sso</span><span class="p">(</span><span class="n">sso_provider</span><span class="p">,</span> <span class="n">sso_email</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">sso_email</span> <span class="ow">in</span> <span class="n">actual</span>
    <span class="k">assert</span> <span class="n">sso_provider</span> <span class="ow">in</span> <span class="n">actual</span>
    <span class="c1"># Non-MFA user disabling SSO</span>
    <span class="n">actual</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">disable_sso</span><span class="p">(</span><span class="n">sso_provider</span><span class="o">=</span><span class="n">sso_provider</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">sso_provider</span> <span class="ow">in</span> <span class="n">actual</span>

    <span class="c1"># Positive case: Non-MFA user enabling SSO with new email address</span>
    <span class="n">new_sso_email</span> <span class="o">=</span> <span class="s2">&quot;new_sso_email@mail.com&quot;</span>
    <span class="n">sso_provider</span> <span class="o">=</span> <span class="s2">&quot;google&quot;</span>
    <span class="n">actual</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">enable_sso</span><span class="p">(</span><span class="n">sso_provider</span><span class="p">,</span> <span class="n">new_sso_email</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">new_sso_email</span> <span class="ow">in</span> <span class="n">actual</span>
    <span class="k">assert</span> <span class="n">sso_provider</span> <span class="ow">in</span> <span class="n">actual</span>

    <span class="c1"># Negative case: Non-MFA user enabling SSO by passing OTP</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">random_otp</span> <span class="o">=</span> <span class="mi">123456</span>
        <span class="n">User</span><span class="o">.</span><span class="n">enable_sso</span><span class="p">(</span><span class="n">sso_provider</span><span class="p">,</span> <span class="n">sso_email</span><span class="p">,</span> <span class="n">otp</span><span class="o">=</span><span class="n">random_otp</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
    <span class="k">assert</span> <span class="s2">&quot;MFA is not activated for the account.&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&#39;Single sign-on (SSO) is successfully enabled for google. Please use sso_email@mail.com as the email address while authenticating with google.&#39;

&#39;Single sign-on (SSO) is successfully disabled for google.&#39;

&#39;Single sign-on (SSO) is successfully enabled for google. Please use new_sso_email@mail.com as the email address while authenticating with google.&#39;

&#39;MFA is not activated for the account. Please pass the OTP only after activating the MFA for your account.&#39;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Tests for register_phone_number</span>
<span class="k">with</span> <span class="n">create_normal_user_for_testing</span><span class="p">():</span>
    <span class="c1"># Negative Scenario. Non-MFA user passing otp</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">random_otp</span> <span class="o">=</span> <span class="mi">123456</span>
        <span class="n">User</span><span class="o">.</span><span class="n">disable_mfa</span><span class="p">(</span><span class="n">otp</span><span class="o">=</span><span class="n">random_otp</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
    <span class="k">assert</span> <span class="s2">&quot;MFA is not activated for the account.&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&#39;MFA is not activated for the account. Please pass the OTP only after activating the MFA for your account.&#39;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Tests for validate_phone_number</span>
<span class="k">with</span> <span class="n">create_normal_user_for_testing</span><span class="p">():</span>
    <span class="c1"># Negative Scenario. Calling validate_phone_number without registering a phone number</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">random_otp</span> <span class="o">=</span> <span class="mi">123456</span>
        <span class="n">User</span><span class="o">.</span><span class="n">validate_phone_number</span><span class="p">(</span><span class="n">otp</span><span class="o">=</span><span class="n">random_otp</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
    <span class="k">assert</span> <span class="s2">&quot;The phone number is not yet registered&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&#39;The phone number is not yet registered. Please register your phone number before calling this method.&#39;
</code></pre></div>


  




                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2022 onwards, airt.ai
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
    and 
    <a href="https://nbdev-mkdocs.airt.ai/" target="_blank" rel="noopener">
      Material for nbdev
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight", "search.share"], "search": "../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.220ee61c.min.js"></script>
      
        
          <script src="../overrides/js/extra.js"></script>
        
      
        
          <script src="../overrides/js/mathjax.js"></script>
        
      
        
          <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        
      
        
          <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        
      
    
  </body>
</html>